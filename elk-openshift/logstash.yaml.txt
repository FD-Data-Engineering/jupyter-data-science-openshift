apiVersion: v1
kind: Pod
metadata:
  name: logstash
  labels:
    app: logstash
  namespace: dev-jupyter-data-science
spec:
  serviceAccountName: elk-svc-acc
  containers:
    - env:
        - name: LS_JAVA_OPTS
          value: "-Xmx256m -Xms256m"
        - name: xpack.monitoring.elasticsearch.ssl.verification_mode
          value: "none"
        - name: xpack.monitoring.enabled
          value: "true"
        - name: XPACK_MONITORING_ELASTICSEARCH_HOSTS
          value: "https://elastic.devsfcluster-56118b4b985711fc98241a723e4ef72a-0000.eu-de.containers.appdomain.cloud"
        - name: XPACK_MONITORING_ELASTICSEARCH_URL
          value: "https://elastic.devsfcluster-56118b4b985711fc98241a723e4ef72a-0000.eu-de.containers.appdomain.cloud"
      name: logstash
      image: "docker.io/thescomcontainers/logstash:7.16.10"
      # image: "prasadgugulla/logstash:7.16.4"
      ports:
        - containerPort: 9600
     # command: ["logstash -f /logstash.conf"]
      volumeMounts:
        - name: notebooks-pv
          mountPath: /notebooks-pv
  volumes:
    - name: notebooks-pv
      persistentVolumeClaim:
        claimName: notebooks-pvc
